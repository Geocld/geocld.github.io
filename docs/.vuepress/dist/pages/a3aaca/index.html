<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue1+源码-深入解析Vue的path状态机 | lijiahao&#39;s blog</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="前端，移动端和杂七杂八的技术分享">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/assets/css/0.styles.37c655b2.css" as="style"><link rel="preload" href="/assets/js/app.a9bdc083.js" as="script"><link rel="preload" href="/assets/js/2.e5ef3fc2.js" as="script"><link rel="preload" href="/assets/js/34.c37860e7.js" as="script"><link rel="prefetch" href="/assets/js/10.8d5d773f.js"><link rel="prefetch" href="/assets/js/11.23d9ff22.js"><link rel="prefetch" href="/assets/js/12.e59f6391.js"><link rel="prefetch" href="/assets/js/13.3e7141e6.js"><link rel="prefetch" href="/assets/js/14.fe486314.js"><link rel="prefetch" href="/assets/js/15.dbb9d75f.js"><link rel="prefetch" href="/assets/js/16.5d434c0a.js"><link rel="prefetch" href="/assets/js/17.da2946ee.js"><link rel="prefetch" href="/assets/js/18.36e8b01d.js"><link rel="prefetch" href="/assets/js/19.9b3b9de6.js"><link rel="prefetch" href="/assets/js/20.193b4724.js"><link rel="prefetch" href="/assets/js/21.616e69cf.js"><link rel="prefetch" href="/assets/js/22.3437dd07.js"><link rel="prefetch" href="/assets/js/23.9800f0eb.js"><link rel="prefetch" href="/assets/js/24.e5a8a296.js"><link rel="prefetch" href="/assets/js/25.6d348e84.js"><link rel="prefetch" href="/assets/js/26.c37cea17.js"><link rel="prefetch" href="/assets/js/27.53a95692.js"><link rel="prefetch" href="/assets/js/28.15b0cfe6.js"><link rel="prefetch" href="/assets/js/29.862a718b.js"><link rel="prefetch" href="/assets/js/3.a285842d.js"><link rel="prefetch" href="/assets/js/30.b9a503f5.js"><link rel="prefetch" href="/assets/js/31.a206f84e.js"><link rel="prefetch" href="/assets/js/32.1a84dedf.js"><link rel="prefetch" href="/assets/js/33.f76a3db5.js"><link rel="prefetch" href="/assets/js/35.03d6ab39.js"><link rel="prefetch" href="/assets/js/36.04a82eac.js"><link rel="prefetch" href="/assets/js/37.6318c57b.js"><link rel="prefetch" href="/assets/js/38.2b9b710b.js"><link rel="prefetch" href="/assets/js/39.569b7614.js"><link rel="prefetch" href="/assets/js/4.b2670b76.js"><link rel="prefetch" href="/assets/js/40.4bc8a30b.js"><link rel="prefetch" href="/assets/js/41.9e28cdcc.js"><link rel="prefetch" href="/assets/js/42.6a82f95a.js"><link rel="prefetch" href="/assets/js/43.3f8a62bd.js"><link rel="prefetch" href="/assets/js/44.7fa8ad87.js"><link rel="prefetch" href="/assets/js/45.7353d595.js"><link rel="prefetch" href="/assets/js/46.5b899020.js"><link rel="prefetch" href="/assets/js/47.6d30e01d.js"><link rel="prefetch" href="/assets/js/48.80d902b8.js"><link rel="prefetch" href="/assets/js/49.798c144d.js"><link rel="prefetch" href="/assets/js/5.743f4f71.js"><link rel="prefetch" href="/assets/js/50.75da1fc9.js"><link rel="prefetch" href="/assets/js/6.cc8be4ba.js"><link rel="prefetch" href="/assets/js/7.4906c9c9.js"><link rel="prefetch" href="/assets/js/8.44bf5540.js"><link rel="prefetch" href="/assets/js/9.68f02dbc.js">
    <link rel="stylesheet" href="/assets/css/0.styles.37c655b2.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open no-sidebar have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">lijiahao's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/Geocld" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://github.com/Geocld" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <!----> </aside> <div><main class="page"> <div class="theme-vdoing-wrapper bg-style-1"><div class="articleInfo-wrap" data-v-14888ed5><div class="articleInfo" data-v-14888ed5><ul class="breadcrumbs" data-v-14888ed5><li data-v-14888ed5><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-14888ed5></a></li> <li data-v-14888ed5><a href="/categories/?category=%E6%8A%80%E6%9C%AF" title="分类" data-v-14888ed5>技术</a></li> <!----></ul> <div class="info" data-v-14888ed5><div title="作者" class="author iconfont icon-touxiang" data-v-14888ed5><a href="https://github.com/geocld" target="_blank" title="作者" class="beLink" data-v-14888ed5>lijiahao</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-14888ed5><a href="javascript:;" data-v-14888ed5>2017-11-22</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">
          Vue1+源码-深入解析Vue的path状态机
        </h1> <div class="theme-vdoing-content content__default"><p>本文将深入解析Vue源码中的path状态机，介绍path状态机如何工作，以及状态机的应用情景。</p> <blockquote><p>ps.我参考的是Vue 1.0.26的源码，下面将主要针对源码中<code>/parsers/path.js</code>和<code>/parser/expression.js</code>对Vue的path状态机进行说明。</p></blockquote> <h2 id="什么是有限状态机"><a href="#什么是有限状态机" class="header-anchor">#</a> 什么是有限状态机</h2> <p>有限状态机（finite-state machine，简称FSM），是一种可以描述状态和动作的数学模型，在组件开发中常用在描述组件的状态和状态转换时触发的动作。有限状态机有以下特点：</p> <ul><li>状态有限</li> <li>某一时刻必定处于一个状态</li> <li>在特定的条件下，一个状态可以向另一个状态转换</li></ul> <p>这么看FSM有点抽象，现在具一个具体的例子：现在需要实现一个开关组件，开关组件有开和关两个状态。对应的，在“开”状态时，可以触发的动作是“关闭”；在“关”状态时，可以触发的动作是“开”，两个状态可以相互转换，使用JavaScript实现如下：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">StateMechine</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>currentState <span class="token operator">=</span> <span class="token string">'on'</span><span class="token punctuation">;</span> <span class="token comment">// 当前状态</span>
<span class="token punctuation">}</span>

<span class="token comment">// 状态列表，每个状态有对应的可转换状态以及动作</span>
<span class="token class-name">StateMechine</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>states <span class="token operator">=</span> <span class="token punctuation">{</span>
	<span class="token string">'on'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		to<span class="token operator">:</span> <span class="token string">'off'</span><span class="token punctuation">,</span>
		action<span class="token operator">:</span> <span class="token string">'turnOff'</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token string">'off'</span><span class="token operator">:</span> <span class="token punctuation">{</span>
		to<span class="token operator">:</span> <span class="token string">'on'</span><span class="token punctuation">,</span>
		action<span class="token operator">:</span> <span class="token string">'turnOn'</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token class-name">StateMechine</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">turn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> old_status <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentState<span class="token punctuation">;</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'当前状态是'</span> <span class="token operator">+</span> old_status <span class="token operator">+</span> <span class="token string">'，之后将状态切换为'</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>states<span class="token punctuation">[</span>old_status<span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">)</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>currentState <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>states<span class="token punctuation">[</span>old_status<span class="token punctuation">]</span><span class="token punctuation">.</span>to<span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>states<span class="token punctuation">[</span>old_status<span class="token punctuation">]</span><span class="token punctuation">.</span>action<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">StateMechine</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">turnOn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'执行turn on transition'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token class-name">StateMechine</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">turnOff</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'执行turn off transition'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p>对这个开关对的进行实例化，并执行状态转换动作：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> my_state <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StateMechine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

my_state<span class="token punctuation">.</span><span class="token function">turn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 先把开关关闭</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">// 1s后重新打开开关</span>
	my_state<span class="token punctuation">.</span><span class="token function">turn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>执行结果如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&gt; 当前状态是on，之后将状态切换为off
&gt; 执行turn off transition
&gt; 当前状态是off，之后将状态切换为on
&gt; 执行turn on transition
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>从上面的例子可以看到，使用状态机描述一个组件，可以很好的解决回调函数、事件监听、发布/订阅等问题，在逻辑上更合理，也更易于降低代码的复杂度。</p> <h2 id="vue的path状态机概述"><a href="#vue的path状态机概述" class="header-anchor">#</a> Vue的path状态机概述</h2> <p>Vue解析路径字符串也使用到了状态机，例如templae中通过prop传递这样一个参数:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;div :data=&quot;a.b.c&quot;&gt;&lt;/div&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在Vue进行模板解析编译时，会把<code>a.b.c</code>解析成字符串，那么怎么把这个字符串再次解析成JavaScript可以直接访问的状态呢，此时Vue的path状态机就派上用场了，例如上面的<code>a.b.c</code>路径的例子，Vue状态机会把这个路径解析成<code>['a', 'b', 'c']</code>，通过<code>a[pathAry[0]][pathAry[1]]</code>的形式即可访问到对应路径的属性。<strong>说到这里，有个问题就来了</strong>:对于这种字符串，不是可以直接使用Function直接拼接path字符串就可以直接取到这个值了吗？如下：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">var</span> parse <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'return a.b.c;'</span><span class="token punctuation">)</span>
<span class="token function">parse</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span> <span class="token comment">// 可以直接得到a.b.c</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>确实如此，如果是只是为了得到路径属性的值，可以直接通过拼接的形式取到，这也是源码expression.js中<code>makeGetterFn</code>所实现的：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// expression.js
function makeGetterFn (body) {
    return new Function('scope', 'return ' + body + ';')
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>但是如果Vue需要对路径中的每一层对象都<strong>进行响应式改造</strong>就需要使用path状态机了。</p> <h2 id="path状态机的状态和动作"><a href="#path状态机的状态和动作" class="header-anchor">#</a> Path状态机的状态和动作</h2> <p>Vue的Path状态机（pathStateMachine）也是一个有限状态机，也就必然少不了<code>状态</code>和<code>动作</code>，path解析最后的结果以数组(keys)的形式保存。</p> <p>Vue 的状态机模式解析 path 实际上是将 path 的每个索引的字符视为一个状态，将接下来一个字符视为当前状态的输入，并根据输入进行状态转移以及响应操作，如果输入不是期望的，那么状态机将异常中止。只有状态机正常运行直到转移到结束状态，才算解析成功。例如路径字符串<code>a][</code>，在解析第一个字符a时，合法的字符串情况第二个字符有以下可能的状态：</p> <ul><li>字符，还是属性名字的一部分，继续添加到a之后</li> <li><code>[</code>或者<code>.</code>，a为第一级属性key，接着访问第三个字符，进入下一级属性解析</li> <li><code>undefined</code>，没有字符串，解析结束</li></ul> <p>在解析a之后解析到了']'，不在状态期望的值中，因此解析失败。</p> <p><code>path.js</code>里面一共定义了9种状态和4种动作，每个状态和动作的含义如下：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// actions</span>
<span class="token keyword">var</span> <span class="token constant">APPEND</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// 字符串还没结束时拼接到前一个字符串之后作为新的属性名，如:hello.world在解析第一个字符h后解析e，发现这个属性名还未结束，将e拼接在h之后成为一个新的属性名he,以此类推</span>
<span class="token keyword">var</span> <span class="token constant">PUSH</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// 将每个阶段解析的结果添加到keys中，如hello.world解析到第一个.时，hello当做一个完整的属性名，push到keys中，如keys = ['hello']</span>
<span class="token keyword">var</span> <span class="token constant">INC_SUB_PATH_DEPTH</span> <span class="token operator">=</span> <span class="token number">2</span> <span class="token comment">// 解析下一级属性，如.[这两个字符串代表进入下一级属性</span>
<span class="token keyword">var</span> <span class="token constant">PUSH_SUB_PATH</span> <span class="token operator">=</span> <span class="token number">3</span> <span class="token comment">// 将下一级解析的属性名添加到keys中</span>

<span class="token comment">// states</span>
<span class="token keyword">var</span> <span class="token constant">BEFORE_PATH</span> <span class="token operator">=</span> <span class="token number">0</span> <span class="token comment">// path解析前的初始状态</span>
<span class="token keyword">var</span> <span class="token constant">IN_PATH</span> <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// 路径解析状态</span>
<span class="token keyword">var</span> <span class="token constant">BEFORE_IDENT</span> <span class="token operator">=</span> <span class="token number">2</span> <span class="token comment">// 遇到.字符时进入该状态，表示在合法字符之前</span>
<span class="token keyword">var</span> <span class="token constant">IN_IDENT</span> <span class="token operator">=</span> <span class="token number">3</span> <span class="token comment">// 解析合法字符中</span>
<span class="token keyword">var</span> <span class="token constant">IN_SUB_PATH</span> <span class="token operator">=</span> <span class="token number">4</span> <span class="token comment">// 在下一级属性解析的状态</span>
<span class="token keyword">var</span> <span class="token constant">IN_SINGLE_QUOTE</span> <span class="token operator">=</span> <span class="token number">5</span> <span class="token comment">// 单引号状态</span>
<span class="token keyword">var</span> <span class="token constant">IN_DOUBLE_QUOTE</span> <span class="token operator">=</span> <span class="token number">6</span> <span class="token comment">// 双引号状态</span>
<span class="token keyword">var</span> <span class="token constant">AFTER_PATH</span> <span class="token operator">=</span> <span class="token number">7</span> <span class="token comment">// 解析完成</span>
<span class="token keyword">var</span> <span class="token constant">ERROR</span> <span class="token operator">=</span> <span class="token number">8</span> <span class="token comment">// 错误状态</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>actions和states组合成path的状态模型，path状态机中一共定义了7个状态模型，如</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>pathStateMachine<span class="token punctuation">[</span><span class="token constant">BEFORE_PATH</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">'ws'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token constant">BEFORE_PATH</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">'ident'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token constant">IN_IDENT</span><span class="token punctuation">,</span> <span class="token constant">APPEND</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">'['</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token constant">IN_SUB_PATH</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token string">'eof'</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token constant">AFTER_PATH</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>状态模型每个key表示当前可能接受的输入，value是一个数组，第一个元素表示接受该输入后进入的状态，第二个元素是执行的动作。BEFORE_PATH状态下，假设约定输入的字符为char，此时状态机接受4种输入:</p> <ul><li><code>ws</code>:空格，tab之类的操作符，进入IN_PATH状态</li> <li><code>ident</code>:char是<code>_</code>或<code>$</code>或<code>a-z</code>、<code>A-Z</code>，当前层级的属性名还没结束，进入IN_IDENT状态，同时执行APPEND</li> <li><code>[</code>:进入第二级属性解析状态IN_SUB_PATH</li> <li><code>eof</code>:char为undefined，结束解析，进入AFTER_PATH状态</li></ul> <p>关于'ws','ident'的具体定义在<code>path.js</code>的<code>getPathCharType</code>中，原理就是通过<code>ch.charCodeAt(0)</code>对<code>[</code>,<code>]</code>,<code>.</code>,<code>_</code>,<code>$</code>进行分类，也就是前面说的状态机“可能的输入”，path状态机就是根据每一个字符的输入，来决定状态机当前的状态和动作，并在满足一个合法路径的时候将当前层级推到数组中，以此类推最后得到总的层级关系数组，部分实现的源码如下：</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">/**
 * Parse a string path into an array of segments
 *
 * @param {String} path
 * @return {Array|undefined}
 */</span>
<span class="token keyword">function</span> <span class="token function">parse</span> <span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> keys <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// 存放各个层次属性的数组，也是最后的返回结果</span>
	<span class="token keyword">var</span> index <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token comment">// 路径字符串的索引</span>
	<span class="token keyword">var</span> mode <span class="token operator">=</span> <span class="token constant">BEFORE_PATH</span> <span class="token comment">// 当前状态</span>
	<span class="token keyword">var</span> subPathDepth <span class="token operator">=</span> <span class="token number">0</span>
	<span class="token keyword">var</span> c<span class="token punctuation">,</span> newChar<span class="token punctuation">,</span> key<span class="token punctuation">,</span> type<span class="token punctuation">,</span> transition<span class="token punctuation">,</span> action<span class="token punctuation">,</span> typeMap
    
    <span class="token keyword">var</span> actions <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// actions是具体的执行动作</span>

	actions<span class="token punctuation">[</span><span class="token constant">APPEND</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// APPEND操作是连接字符串</span>
	    <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	      key <span class="token operator">=</span> newChar
	    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
	      key <span class="token operator">+=</span> newChar
	    <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
    <span class="token comment">// 其他actions就不摘抄了</span>
    
    <span class="token comment">// 开始循环遍历path</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>mode <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		index<span class="token operator">++</span>
		c <span class="token operator">=</span> path<span class="token punctuation">[</span>index<span class="token punctuation">]</span>

		type <span class="token operator">=</span> <span class="token function">getPathCharType</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token comment">// 获取当前字符的类型，如'ws','indent'等</span>
		typeMap <span class="token operator">=</span> pathStateMachine<span class="token punctuation">[</span>mode<span class="token punctuation">]</span> <span class="token comment">// 通过mode（当前状态）获取对应的状态模型</span>
		transition <span class="token operator">=</span> typeMap<span class="token punctuation">[</span>type<span class="token punctuation">]</span> <span class="token operator">||</span> typeMap<span class="token punctuation">[</span><span class="token string">'else'</span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token constant">ERROR</span> <span class="token comment">// 从状态机模型取响相应的状态和动作，如[IN_IDENT, APPEND]</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>transition <span class="token operator">===</span> <span class="token constant">ERROR</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'非法字符'</span><span class="token punctuation">)</span>
			<span class="token keyword">return</span>
		<span class="token punctuation">}</span>

		mode <span class="token operator">=</span> transition<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>  <span class="token comment">// 下一个状态，在这里完成了状态的转换</span>
		action <span class="token operator">=</span> actions<span class="token punctuation">[</span>transition<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token comment">// 转换状态的action</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>action<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			newChar <span class="token operator">=</span> transition<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
			newChar <span class="token operator">=</span> newChar <span class="token operator">===</span> <span class="token keyword">undefined</span> <span class="token operator">?</span> c <span class="token operator">:</span> newChar
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">action</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">return</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>

		<span class="token keyword">if</span> <span class="token punctuation">(</span>mode <span class="token operator">===</span> <span class="token constant">AFTER_PATH</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			keys<span class="token punctuation">.</span>raw <span class="token operator">=</span> path
			<span class="token keyword">return</span> keys
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><p>完整的源码可以参见<a href="https://github.com/vuejs/vue/blob/e9872271fa9b2a8bec1c42e65a2bb5c4df808eb2/src/parsers/path.js" target="_blank" rel="noopener noreferrer">这里<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <h2 id="一个具体的实例"><a href="#一个具体的实例" class="header-anchor">#</a> 一个具体的实例</h2> <p>现在我们回到本文最开始举的例子，解析<code>a.b.c</code>这个路径，为了说明状态机的原理，这里我稍微改造下路径<code>at['b'].c</code>，结合上面的<code>parse()</code>来看看解析的过程是怎样的，首先约定如下:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>index : 当前path的索引
mode : 当前状态
input : 当前输入
type : 当前输入经过getPathCharType之后得到的结果
next mode : 下一个状态
action : 当前执行的动作
key : 当前路径属性的临时变量
keys : 存放各个层次属性的数组，也是最后的返回结果
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ol><li>index = 0</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>mode = BEFORE_PATH
input = 'a'
type = 'ident'
next mode = IN_IDENT
action = APPEND
key = 'a'
keys = []
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="2"><li>index = 1</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>mode = IN_IDENT
input = 't'
type = 'indent'
next mode = IN_IDENT
action = APPEND
key = 'at'
keys = []
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="3"><li>index = 2</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>mode = IN_IDENT
input = '['
type = '['
next mode = IN_SUB_PATH
action = PUSH
key = undefined
keys = ['at']
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="4"><li>index = 3</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>mode = IN_SUB_PATH
input = '''
type = '''
next mode = IN_SINGLE_QUOTE
action = APPEND
key = '''
keys = ['at']
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="5"><li>index = 4</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>mode = IN_SINGLE_QUOTE
input = 'b'
type = 'else'
next mode = IN_SINGLE_QUOTE
action = APPEND
key = ''b'
keys = ['at']
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="6"><li>index = 5</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>mode = IN_SINGLE_QUOTE
input = '''
type = '''
next mode = IN_SUB_PATH
action = APPEND
key = ''b''
keys = ['at']
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="7"><li>index = 6</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>mode = IN_SINGLE_QUOTE
input = ']'
type = ']'
next mode = IN_PATH
action = PUSH_SUB_PATH
key = undefined
keys = ['at', 'b']
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="8"><li>index = 7</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>mode = IN_PATH
input = '.'
type = ']'
next mode = BEFORE_IDENT
action = undefined
key = undefined
keys = ['at', 'b']
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="9"><li>index = 8</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>mode = BEFORE_IDENT
input = 'c'
type = 'ident'
next mode = IN_IDENT
action = APPEND
key = 'c'
keys = ['at', 'b']
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol start="9"><li>index = 9</li></ol> <div class="language- line-numbers-mode"><pre class="language-text"><code>mode = IN_IDENT
input = undefined
type = 'eof'
next mode = AFTER_PATH
action = PUSH
key = undefined
keys = ['at', 'b', 'c']
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>到这里状态机分析就结束了，最后得到的keys供Vue进行属性响应改造使用。如果上面过程看的有点晕，建议对照着源码仔细阅读，毕竟这里涉及各种状态的互相转换。</p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>有限状态机是JavaScript里很实用但不太常见的结构模型，Vue的path状态机更是针对不同的字符有不同的状态表现，刚开始我看也是一头雾水，但经过多次反复阅读，总算可以把Vue的path状态机的工作原理说清楚了，也充分学习了有限状态机的具体应用，不过刚才我粗略看了下Vue2+的源码，没有找到状态机的使用，可能Vue2使用了jsx解析（这个纯属猜测）可以省略path解析这一步？这有待后续探讨。</p> <p>（完）</p> <p>参考：</p> <p><a href="https://github.com/banama/aboutVue/blob/master/pathStateMachine.md" target="_blank" rel="noopener noreferrer">Vue 模板表达式解析和 path 状态机<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div></div> <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=Vue" title="标签">
      #Vue
    </a><a href="/tags/?tag=JavaScript" title="标签">
      #JavaScript
    </a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2020/08/08, 16:08:00</span></div></div> <div class="page-nav-wapper"><!----> <!----></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/658815/"><div>react-native run-ios内部原理探索</div></a> <span>03-05</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/3ffe0e/"><div>Android电话监听功能开发及注意事项</div></a> <span>01-22</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/85ee6e/"><div>关于Rom Hacking你可以了解到的一些事</div></a> <span>01-16</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div> </main></div> <div class="footer"><div class="icons"><a href="mailto:lijiahao53@gmail.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/geocld" title="GitHub" target="_blank" class="iconfont icon-github"></a></div> 
  Theme by <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
     | Copyright © 2015-2020
    <span>lijiahao | <a href="https://github.com/xugaoyi/vuepress-theme-vdoing/blob/master/LICENSE" target="_blank">MIT License</a></span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a9bdc083.js" defer></script><script src="/assets/js/2.e5ef3fc2.js" defer></script><script src="/assets/js/34.c37860e7.js" defer></script>
  </body>
</html>